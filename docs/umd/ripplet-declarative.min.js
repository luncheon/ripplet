!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).ripplet=t()}(this,function(){"use strict";function b(e,t,n){if(e){e=e.multiply((new T).translate(t,n));return{x:e.e,y:e.f}}return{x:t,y:n}}function E(e,t,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];e[o]=t[o]}}var T="undefined"!=typeof DOMMatrix?DOMMatrix:"undefined"!=typeof MSCSSMatrix?MSCSSMatrix:void 0,C={className:"",color:"currentcolor",opacity:.1,spreadingDuration:".4s",spreadingDelay:"0s",spreadingTimingFunction:"linear",clearing:!0,clearingDuration:"1s",clearingDelay:"0s",clearingTimingFunction:"ease-in-out",centered:!1,appendTo:"body"},w=new Map;function o(e,n){var t=e.currentTarget,r=e.clientX,i=e.clientY;if(t instanceof Element){var o=n?Object.keys(C).reduce(function(e,t){return e[t]=(n.hasOwnProperty(t)?n:C)[t],e},{}):C,a=document.documentElement,l=document.body,p=getComputedStyle(l),s=1/(+p.zoom||1),c=function(e){if("none"!==e.transform){var t=e.transformOrigin.split(" "),n=parseFloat(t[0]),t=parseFloat(t[1]);return(new T).translate(n+parseFloat(e.marginLeft),t+parseFloat(e.marginTop)).multiply(new T(e.transform)).translate(-n,-t).inverse()}}(p),f=t.getBoundingClientRect();if(o.centered&&"false"!==o.centered)r=f.left+.5*f.width,i=f.top+.5*f.height;else{if("number"!=typeof r||"number"!=typeof i)return;r*=s,i*=s}var d,u=getComputedStyle(t),m=function(e){var t=e&&/^var\((--.+)\)$/.exec(e);return t?u.getPropertyValue(t[1]):e},g=document.createElement("div"),y="parent"===o.appendTo,h=g,x=g.style;"fixed"===u.position||"absolute"===u.position&&y?(y?t.parentElement.insertBefore(g,t):l.appendChild(g),E(x,u,["position","left","top","right","bottom","marginLeft","marginTop","marginRight","marginBottom"])):y?"flex"===(d=getComputedStyle(t.parentElement)).display||"inline-flex"===d.display?(t.parentElement.insertBefore(g,t),x.position="absolute",x.left=t.offsetLeft+"px",x.top=t.offsetTop+"px"):((d=(e=h=t.parentElement.insertBefore(document.createElement("div"),t)).style).cssFloat="left",d.position="relative",d=e.getBoundingClientRect(),e.appendChild(g),x.position="absolute",x.top=f.top-d.top+"px",x.left=f.left-d.left+"px"):(l.appendChild(g),x.position="absolute",v=b(c,f.left+a.scrollLeft+l.scrollLeft*s,f.top+a.scrollTop+l.scrollTop*s),x.left=v.x+"px",x.top=v.y+"px");var v=b(function(e){if("none"!==e.transform){e=new T(e.transform);return e.translate(-e.e,-e.f).inverse()}}(p),f.width,f.height);x.width=v.x+"px",x.height=v.y+"px",x.overflow="hidden",x.pointerEvents="none",x.zIndex=(+u.zIndex||0)+1,x.opacity=m(o.opacity),E(x,u,["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius","webkitClipPath","clipPath"]);p=b(c,f.left,f.top),v=b(c,f.right,f.bottom),x=b(c,r,i),f=Math.max(x.x-p.x,v.x-x.x),c=Math.max(x.y-p.y,v.y-x.y),r=Math.sqrt(f*f+c*c),i=document.createElement("div"),f=i.style,c=m(o.color);return f.backgroundColor=/^currentcolor$/i.test(c)?u.color:c,i.className=o.className,f.width=f.height=2*r+"px","rtl"===getComputedStyle(y?t.parentElement:l).direction?f.marginRight=v.x-x.x-r+"px":f.marginLeft=x.x-p.x-r+"px",f.marginTop=x.y-p.y-r+"px",f.borderRadius="50%",f.transition="transform "+m(o.spreadingDuration)+" "+m(o.spreadingTimingFunction)+" "+m(o.spreadingDelay)+",opacity "+m(o.clearingDuration)+" "+m(o.clearingTimingFunction)+" "+m(o.clearingDelay),f.transform="scale(0)",g.appendChild(i),i.offsetTop,f.transform="",i.addEventListener("transitionend",function(e){"opacity"===e.propertyName&&h.parentElement&&h.parentElement.removeChild(h)}),o.clearing&&"false"!==o.clearing?f.opacity="0":((f=w.get(t))||w.set(t,f=new Map),f.set(g,i)),g}}o.clear=function(e,t){var n,r;e?(n=w.get(e))&&(t?((r=n.get(t))&&(r.style.opacity="0"),n.delete(t),0===n.size&&w.delete(e)):(n.forEach(function(e){return e.style.opacity="0"}),w.delete(e))):(w.forEach(function(e){return e.forEach(function(e){return e.style.opacity="0"})}),w.clear())},o.defaultOptions=C,o._ripplets=w;addEventListener("pointerdown",function(e){var t,n,r,i;0!==e.button||(t=function(e){for(;e&&!e.hasAttribute("data-ripplet");)e=e.parentElement;return e}(e.target))&&("false"!==(n=function(e){var t={};if(e)for(var n=0,r=e.split(";");n<r.length;n++){var i=r[n],o=i.indexOf(":");t[i.slice(0,o).trim().replace(/[a-zA-Z0-9_]-[a-z]/g,function(e){return e[0]+e[2].toUpperCase()})]=i.slice(o+1).trim()}return t}(t.getAttribute("data-ripplet"))).clearing&&(n.clearing="false",r=function(){o.clear(t,i),t.removeEventListener("pointerup",r),t.removeEventListener("pointerleave",r)},t.addEventListener("pointerup",r),t.addEventListener("pointerleave",r)),i=o({currentTarget:t,clientX:e.clientX,clientY:e.clientY},n))},!0);var t=Object.freeze({__proto__:null,default:o,defaultOptions:C});return Object.keys(t).forEach(function(e){o[e]=t[e]}),o});